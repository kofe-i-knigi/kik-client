<section class="content-header">
  <h1>Остатки</h1>
</section>

<section class="content">
  <div class="row">
    <div class="col-xs-12">
      <a class="btn btn-primary"
         ui-sref="admin.stock.createDelivery"
         >Новая поставка</a>
      <a class="btn btn-success"
         ui-sref="admin.stock.shortageReport"
         >Сформировать заявку</a>
      <a class="btn btn-danger"
         ui-sref="admin.audits.new({storeId: vm.storeId})"
         >Провести ревизию</a>
      <a class="btn btn-danger"
         ui-sref="admin.audits.list({storeId: vm.storeId})"
         >Список ревизий</a>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-3">
      <div class="box search-box">
        <div class="form form-horizontal">
          <div class="form-group">
            <div class="col-xs-3">
              <label>Поиск</label>
            </div>
            <div class="col-xs-9">
              <input type="text" class="form-control"
                     ng-model="vm.filters.name"
                     ng-model-options="{debounce: 300}"
                     ng-change="vm.tableParams.refresh()">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-6">
      <div class="box list-goods-box">
        <table ng-table="vm.tableParams" class="table table-bordered table-hover">
          <tr ng-repeat="product in $data">
            <td data-title="'Название'" sortable="'name'">
              {{::product.name}}
            </td>
            <td data-title="'Остаток'" sortable="'quantity'">
              <editable-text ng-model="product.stock[0].quantity"
                             change="vm.updateQuantity(product)"
                             unit="product.unit" required>
            </td>
            <td data-title="'Себестоимость, руб.'" sortable="'costPrice'">
              {{::product.costPrice | currency:''}}
            </td>
            <td data-title="'Сумма, руб.'">
              {{::product.totalCostPrice | currency:''}}
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</section>
